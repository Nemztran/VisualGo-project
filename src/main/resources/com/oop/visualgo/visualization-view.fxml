<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.scene.canvas.Canvas?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.layout.BorderPane?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.Pane?>
<?import javafx.scene.layout.VBox?>

<BorderPane minHeight="700" minWidth="1000" prefHeight="800" prefWidth="1200" xmlns="http://javafx.com/javafx/21" xmlns:fx="http://javafx.com/fxml/1" fx:controller="com.oop.visualgo.controller.VisualizationViewController">

    <!-- Top Bar with Back Button -->
    <top>
        <HBox alignment="CENTER_LEFT" spacing="10" style="-fx-background-color: #333; -fx-padding: 10 15;" minHeight="45">
            <Button onAction="#onBackToMenu" style="-fx-background-color: #ff6b6b; -fx-text-fill: white; -fx-font-size: 14; -fx-padding: 8 15; -fx-cursor: hand;" text="← Back" />
        </HBox>
    </top>

    <!-- Left Menu -->
    <left>
        <VBox fx:id="leftMenu" alignment="TOP_LEFT" minWidth="150" prefWidth="180" spacing="0" style="-fx-background-color: #4caf50;">
            <Button maxWidth="Infinity" onAction="#onCreate" style="-fx-background-color: #4caf50; -fx-text-fill: white; -fx-padding: 15; -fx-font-size: 14; -fx-cursor: hand;" text="Create" />
            <Button maxWidth="Infinity" onAction="#onSearch" style="-fx-background-color: #4caf50; -fx-text-fill: white; -fx-padding: 15; -fx-font-size: 14; -fx-cursor: hand;" text="Search(v)" />
            <Button maxWidth="Infinity" onAction="#onInsert" style="-fx-background-color: #4caf50; -fx-text-fill: white; -fx-padding: 15; -fx-font-size: 14; -fx-cursor: hand;" text="Insert(v)" />
            <Button maxWidth="Infinity" onAction="#onRemove" style="-fx-background-color: #4caf50; -fx-text-fill: white; -fx-padding: 15; -fx-font-size: 14; -fx-cursor: hand;" text="Remove(v)" />
            <VBox>
                <Button fx:id="traverseBtn" maxWidth="Infinity" mnemonicParsing="false" onAction="#onTraverseToggle" style="-fx-background-color: #4caf50; -fx-text-fill: white; -fx-padding: 15; -fx-font-size: 14; -fx-cursor: hand;" text="Traverse ▼" />
                <HBox fx:id="traverseOptions" managed="false" spacing="5" style="-fx-background-color: #4caf50; -fx-padding: 5 10;" visible="false">
                    <Button mnemonicParsing="false" onAction="#onInorder" style="-fx-background-color: white; -fx-text-fill: #4caf50; -fx-padding: 8 12; -fx-font-size: 11; -fx-cursor: hand;" text="Inorder" />
                    <Button mnemonicParsing="false" onAction="#onPreorder" style="-fx-background-color: white; -fx-text-fill: #4caf50; -fx-padding: 8 12; -fx-font-size: 11; -fx-cursor: hand;" text="Preorder" />
                    <Button mnemonicParsing="false" onAction="#onPostorder" style="-fx-background-color: white; -fx-text-fill: #4caf50; -fx-padding: 8 12; -fx-font-size: 11; -fx-cursor: hand;" text="Postorder" />
                </HBox>
            </VBox>
        </VBox>
    </left>

    <!-- Canvas Area for Tree Visualization -->
    <center>
        <Pane fx:id="canvasPane" style="-fx-background-color: #f5f5f5;">
            <Canvas fx:id="treeCanvas" />
        </Pane>
    </center>

    <!-- Bottom Control Panel - Always visible with fixed height -->
    <bottom>
        <HBox alignment="CENTER" spacing="20" minHeight="100" prefHeight="100" maxHeight="100"
              style="-fx-background-color: linear-gradient(to bottom, #e0e0e0, #c0c0c0); -fx-border-color: #8B4513; -fx-border-width: 3 0 0 0; -fx-padding: 20 30;">
            <Button fx:id="rewindBtn" onAction="#onRewind" prefWidth="60" prefHeight="60" minWidth="60" minHeight="60"
                    style="-fx-background-color: #555555; -fx-text-fill: #ff9800; -fx-font-size: 16; -fx-font-weight: bold; -fx-cursor: hand; -fx-background-radius: 8;" text="⏮" />
            <Button fx:id="stepBackBtn" onAction="#onStepBack" prefWidth="60" prefHeight="60" minWidth="60" minHeight="60"
                    style="-fx-background-color: #555555; -fx-text-fill: #ff9800; -fx-font-size: 20; -fx-font-weight: bold; -fx-cursor: hand; -fx-background-radius: 8;" text="◀" />
            <Button fx:id="pauseBtn" onAction="#onPause" prefWidth="60" prefHeight="60" minWidth="60" minHeight="60"
                    style="-fx-background-color: #555555; -fx-text-fill: #ffeb3b; -fx-font-size: 16; -fx-font-weight: bold; -fx-cursor: hand; -fx-background-radius: 8;" text="⏸" />
            <Button fx:id="playBtn" onAction="#onPlay" prefWidth="60" prefHeight="60" minWidth="60" minHeight="60"
                    style="-fx-background-color: #555555; -fx-text-fill: #4caf50; -fx-font-size: 20; -fx-font-weight: bold; -fx-cursor: hand; -fx-background-radius: 8;" text="▶" />
            <Button fx:id="fastForwardBtn" onAction="#onFastForward" prefWidth="60" prefHeight="60" minWidth="60" minHeight="60"
                    style="-fx-background-color: #555555; -fx-text-fill: #03a9f4; -fx-font-size: 16; -fx-font-weight: bold; -fx-cursor: hand; -fx-background-radius: 8;" text="⏭" />
        </HBox>
    </bottom>

</BorderPane>
